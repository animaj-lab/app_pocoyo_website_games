var game=new Phaser.Game(768,1024,Phaser.AUTO,"pocoyo-game","game");WebFontConfig={google:{families:["Dosis"]}};var GameObject={};GameObject.Boot=function(a){GameObject.LANG=($("html").attr("lang")=="es")?"es":"en";GameObject.GAME_PATH="/space-adventure/";GameObject.GAME_IMG=(GameObject.LANG=="es")?"http://www.pocoyo.com/img/juegos/2015/03/cover-aventura-espacio.jpg":"http://www.pocoyo.com/img/juegos/2015/03/cover-space-adventure.jpg";GameObject.GAME_NAME=(GameObject.LANG=="es")?"Pocoyo: Aventura en el espacio":"Pocoyo: Space adventure";GameObject.GAME_SEO_URL=(GameObject.LANG=="es")?"http://www.pocoyo.com/juegos-ninos/aventura-espacio":"http://www.pocoyo.com/en/funny-games/space-adventure";GameObject.PLAYER_WIDTH=185;GameObject.PLAYER_HEIGHT=100;GameObject.GROUND_HEIGHT=150;GameObject.MUTE=false};GameObject.Boot.prototype={init:function(){this.input.maxPointers=1;this.stage.disableVisibilityChange=true;if(this.game.device.desktop){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;this.scale.forceOrientation(true);this.scale.pageAlignHorizontally=true;this.scale.pageAlignVertically=true;this.scale.setScreenSize(true)}else{this.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT;this.scale.pageAlignHorizontally=true;this.scale.pageAlignVertically=true;this.scale.forceOrientation(false,true);this.scale.setResizeCallback(this.forceExactFit,this);this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this);this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this)}},preload:function(){this.load.image("bg-loading",GameObject.GAME_PATH+"assets/images/bg-loading-"+GameObject.LANG+".jpg");this.load.image("preloaderbar",GameObject.GAME_PATH+"assets/images/loading-bar.png")},create:function(){this.state.start("Preloader")},gameResized:function(d,a){var c=window.innerHeight;var b=window.innerWidth;var e=(game.width*c)/game.height;this.scale.setMinMax(e,c,e,c)},forceExactFit:function(d,a){var c=window.innerHeight;var b=window.innerWidth;this.scale.setMinMax(b,c,b,c)},enterIncorrectOrientation:function(){GameObject.orientated=false;document.getElementById("incorrect-orientation").style.display="block"},leaveIncorrectOrientation:function(){GameObject.orientated=true;document.getElementById("incorrect-orientation").style.display="none"}};GameObject.Preloader=function(a){};GameObject.Preloader.prototype={preload:function(){this.add.sprite(0,0,"bg-loading");this.preloadBar=this.add.sprite(210,827,"preloaderbar");this.preloadBar.anchor.setTo(0,0);this.load.setPreloadSprite(this.preloadBar);this.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.5.10/webfont.js");this.load.image("background-mainmenu",GameObject.GAME_PATH+"assets/images/bg-mainmenu-"+GameObject.LANG+".jpg");this.load.image("background",GameObject.GAME_PATH+"assets/images/bg.jpg");this.load.image("ground",GameObject.GAME_PATH+"assets/images/bg-ground.png");this.load.image("rocket",GameObject.GAME_PATH+"assets/images/rocket.png");this.load.image("score-board",GameObject.GAME_PATH+"assets/images/bg-score-board.png");this.load.image("bg-finger-tap",GameObject.GAME_PATH+"assets/images/bg-finger-tap.png");this.load.image("star-1",GameObject.GAME_PATH+"assets/images/star-1.png");this.load.image("star-2",GameObject.GAME_PATH+"assets/images/star-2.png");this.load.image("star-3",GameObject.GAME_PATH+"assets/images/star-3.png");this.load.image("star-4",GameObject.GAME_PATH+"assets/images/star-4.png");this.load.image("star-5",GameObject.GAME_PATH+"assets/images/star-5.png");this.load.image("hearth",GameObject.GAME_PATH+"assets/images/hearth.png");this.load.image("moon",GameObject.GAME_PATH+"assets/images/moon.png");this.load.image("planet",GameObject.GAME_PATH+"assets/images/planet.png");this.load.spritesheet("player",GameObject.GAME_PATH+"assets/images/sprite-player.png",GameObject.PLAYER_WIDTH,GameObject.PLAYER_HEIGHT,3);this.load.spritesheet("alien",GameObject.GAME_PATH+"assets/images/sprite-alien.png",200,200);this.load.spritesheet("button-play",GameObject.GAME_PATH+"assets/images/btn-play.png",271,86);this.load.spritesheet("button-ranking",GameObject.GAME_PATH+"assets/images/btn-ranking.png",271,86);this.load.spritesheet("button-instructions",GameObject.GAME_PATH+"assets/images/btn-instrucciones-"+GameObject.LANG+".png",270,86);this.load.spritesheet("button-menu",GameObject.GAME_PATH+"assets/images/btn-menu.png",64,64);this.load.spritesheet("meteor",GameObject.GAME_PATH+"assets/images/sprite-meteor.png",75,75);this.load.spritesheet("button-mute",GameObject.GAME_PATH+"assets/images/btn-mute.png",80,80);game.load.audio("audio-bg-menu",GameObject.GAME_PATH+"assets/audio/PY_RACING_Loop_02_acelerado_YES.mp3");game.load.audio("audio-bg",GameObject.GAME_PATH+"assets/audio/SFX0013.mp3");game.load.audio("audio-score",GameObject.GAME_PATH+"assets/audio/pocoyo0008.mp3");game.load.audio("audio-jump",GameObject.GAME_PATH+"assets/audio/pocoyo-salto01.mp3");game.load.audio("audio-hit",GameObject.GAME_PATH+"assets/audio/hit.mp3");
game.load.audio("audio-boing",GameObject.GAME_PATH+"assets/audio/FX4.mp3");game.load.audio("audio-gameover",GameObject.GAME_PATH+"assets/audio/error.mp3");game.load.audio("audio-impact",GameObject.GAME_PATH+"assets/audio/woosh.mp3");game.load.audio("audio-alien-risa",GameObject.GAME_PATH+"assets/audio/angry-risa2.mp3")},create:function(){GameObject._bgMenuMusic=this.add.audio("audio-bg-menu",1,true);GameObject._bgMusic=this.add.audio("audio-bg",1,true);GameObject._bgMenuMusic.play("",0,0.5,true);this.state.start("MainMenu")}};GameObject.MainMenu=function(a){};GameObject.MainMenu.prototype={create:function(){this.add.sprite(0,0,"background-mainmenu");if(GameObject._bgMusic.isPlaying){GameObject._bgMusic.stop()}if(!GameObject._bgMenuMusic.isPlaying&&!GameObject.MUTE){GameObject._bgMenuMusic.play("",0,0.5,true)}this._muteButton=this.add.button(20,game.height-100,"button-mute",this.manageSound,this,1,0,2);if(GameObject.MUTE){this._muteButton.frame=2}this._startButton=this.add.button(600,765,"button-play",this.startGame,this,0,1);this._startButton.anchor.setTo(0.5,0.5);this._rankingButton=this.add.button(600,865,"button-ranking",this.goRanking,this,0,1);this._rankingButton.anchor.setTo(0.5,0.5);this._instructionButton=this.add.button(600,965,"button-instructions",this.goInstructions,this,1,0);this._instructionButton.anchor.setTo(0.5,0.5)},startGame:function(){this.state.start("Game")},goRanking:function(){this.state.start("Ranking")},goInstructions:function(){this.state.start("Instructions")},manageSound:function(){if(GameObject.MUTE){GameObject._bgMenuMusic.resume();this._muteButton.setFrames(0);GameObject.MUTE=false}else{GameObject._bgMenuMusic.pause();this._muteButton.setFrames(2);GameObject.MUTE=true}}};GameObject.Game=function(a){this._background=null;this._ground=null;this._player=null;this._flapKey=null;GameObject._score=null;GameObject._health=null;GameObject._scoreText=null;GameObject._healthText=null;GameObject._timerText=null;GameObject._audioScore=null;GameObject._startTimer=null;GameObject._totalSeconds=0;GameObject._seconds=0;GameObject._scrollVelocity=-200;this._fingerInstructions=null;this._starsGroup=null;this._meteorGroup=null;this._alienGroup=null;this._rocketGroup=null;this._planetGroup=null;this._spawnStarTimer=0;this._spawnMeteorTimer=0;this._spawnAlienTimer=0;this._spawnRocketTimer=0;this._spawnPlanetTimer=0};GameObject.Game.prototype={create:function(){GameObject.userLogged=false;GameObject._startTimer=new Date();GameObject._score=0;GameObject._health=3;GameObject._audioScore=this.add.audio("audio-score");GameObject._audioJump=this.add.audio("audio-jump");GameObject._audioHit=this.add.audio("audio-hit");GameObject._audioBoing=this.add.audio("audio-boing");GameObject._audioImpact=this.add.audio("audio-impact");GameObject._audioAlienRisa=this.add.audio("audio-alien-risa");if(GameObject._bgMenuMusic.isPlaying){GameObject._bgMenuMusic.stop()}if(!GameObject._bgMusic.isPlaying&&!GameObject.MUTE){GameObject._bgMusic.play("",0,0.75,true)}this.physics.startSystem(Phaser.Physics.ARCADE);this.physics.arcade.gravity.y=500;this._background=new Background(game,0,0,game.width,game.height);game.add.existing(this._background);this._ground=new Ground(game,0,game.height-GameObject.GROUND_HEIGHT,game.width,game.height);game.add.existing(this._ground);this._muteButton=this.add.button(20,game.height-100,"button-mute",this.manageSound,this,1,0,2);if(GameObject.MUTE){this._muteButton.frame=2}this._planetGroup=this.add.group();this._starsGroup=this.add.group();game.add.tween(this._starsGroup).to({y:-30},350,Phaser.Easing.Linear.NONE,true,0,1000,true);this._meteorGroup=this.add.group();this._alienGroup=this.add.group();game.add.tween(this._alienGroup).to({y:-10},1000,Phaser.Easing.Linear.NONE,true,0,1000,true);this._rocketGroup=this.add.group();this.add.sprite(30,30,"score-board");GameObject._scoreText=this.add.text(185,46,"0",{font:"35px Dosis",fill:"#FFF31E"});GameObject._scoreText.anchor.set(1,0);GameObject._healthText=this.add.text(185,90,"3",{font:"35px Dosis",fill:"#D90000"});GameObject._healthText.anchor.set(1,0);GameObject._timerText=this.add.text(185,140,"00:00:00",{font:"23px Dosis",fill:"#1e003c"});GameObject._timerText.anchor.set(1,0);this._player=new Player(game,200,400);this._player.anchor.setTo(0.5,0.5);game.add.existing(this._player);this._player.body.bounce.set(0.8);this._fingerInstructions=this.add.sprite(this._player.x,this._player.y+175,"bg-finger-tap");this._fingerInstructions.anchor.setTo(0.5,0.5);game.add.tween(this._fingerInstructions).to({y:this._fingerInstructions.y-10},350,Phaser.Easing.Linear.NONE,true,0,1000,true);game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]);this._flapKey=this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);this._flapKey.onDown.addOnce(this.startGame,this);this._flapKey.onDown.add(this._player.flap,this._player);game.input.onDown.addOnce(this.startGame,this);game.input.onDown.add(this._player.flap,this._player)},update:function(){if(this._planetGroup.children.length===0){this._spawnPlanetTimer+=this.time.elapsed;
if(this._spawnPlanetTimer>1750){this._spawnPlanetTimer=0;this.spawnPlanet(this)}}this.moveLikeBakground(this._planetGroup);if(this._player.alive){this._spawnStarTimer++;this._spawnMeteorTimer++;this._spawnAlienTimer++;this._spawnRocketTimer++;if(this._spawnStarTimer>100){this._spawnStarTimer=0;this.spawnStar(this)}this.moveLikeBakground(this._starsGroup);if(this._spawnMeteorTimer>150){this._spawnMeteorTimer=0;this.spawnMeteor(this)}this.moveMeteors(this._meteorGroup);if(this._alienGroup.children.length===0){if(this._spawnAlienTimer>1000){this._spawnAlienTimer=0;this.spawnAlien(this)}}this.moveAliens(this._alienGroup);if(this._rocketGroup.children.length===0){if(this._spawnRocketTimer>1500){this._spawnRocketTimer=0;this.spawnRocket(this)}}this.moveLikeBakground(this._rocketGroup)}this._meteorGroup.forEach(function(a){a.angle+=a.rotateMe});this._alienGroup.forEach(function(a){a.angle+=a.rotateMe});if(!GameObject._health){this._player.kill();this.gameOver()}if(GameObject._score>49&&Math.floor(GameObject._score%50)==0){GameObject._scrollVelocity--}game.physics.arcade.overlap(this._meteorGroup,this._ground,this.intersecMeteorGround,null,this);this.physics.arcade.overlap(this._player,this._starsGroup,this.intersecStar,null,this);this.physics.arcade.overlap(this._player,this._meteorGroup,this.intersecMeteor,null,this);this.physics.arcade.overlap(this._player,this._alienGroup,this.intersecAlien,null,this);this.physics.arcade.overlap(this._player,this._rocketGroup,this.intersecRocket,null,this);game.physics.arcade.collide(this._player,this._ground,this.intersecGround,null,this)},updateTimer:function(){GameObject._totalSeconds++;var a=Math.floor(GameObject._totalSeconds/3600);GameObject._totalSeconds%=3600;var b=Math.floor(GameObject._totalSeconds/60);GameObject._seconds=parseInt(GameObject._totalSeconds%60);GameObject._timerText.setText(this.addLeadingZeros(a)+":"+this.addLeadingZeros(b)+":"+this.addLeadingZeros(GameObject._seconds))},addLeadingZeros:function(a){return(a<10)?"0"+a:a},startGame:function(){if(!this._player.alive&&GameObject._health>0){this._fingerInstructions.destroy();this._player.body.allowGravity=true;this._player.alive=true;this.moveLikeBakground(this._starsGroup);this._spawnStarTimer=1000;this.spawnMeteor(this);this.moveMeteors(this._meteorGroup);GameObject._startTimer=game.time.create(false);GameObject._startTimer.loop(Phaser.Timer.SECOND,this.updateTimer,this);GameObject._startTimer.start()}},spawnStar:function(){var a=Math.floor(Math.random()*(game.height-(GameObject.GROUND_HEIGHT+25))+1);var c=Math.floor(Math.random()*(6-1)+1);var b=game.add.sprite(775,a,"star-"+c);b.points=c;this.physics.enable(b,Phaser.Physics.ARCADE);b.body.allowGravity=false;b.body.immovable=true;b.checkWorldBounds=true;b.outOfBoundsKill=true;b.anchor.setTo(0.5,0.5);this._starsGroup.add(b)},spawnMeteor:function(){var a=Math.floor(Math.random()*(game.height-250));var b=game.add.sprite(game.width+40,a,"meteor");this.physics.enable(b,Phaser.Physics.ARCADE);b.body.allowGravity=false;b.body.immovable=true;b.checkWorldBounds=true;b.outOfBoundsKill=true;b.anchor.setTo(0.5,0.5);b.rotateMe=(Math.random()*4)-2;this._meteorGroup.add(b)},moveMeteors:function(a){a.setAll("body.velocity.x",GameObject._scrollVelocity*2);a.setAll("body.velocity.y",25*2)},spawnAlien:function(){var a=Math.random()*(game.height-(GameObject.GROUND_HEIGHT+100));var b=game.add.sprite(game.width+50,a,"alien");b.scale.set(0.5,0.5);this.physics.enable(b,Phaser.Physics.ARCADE);b.body.allowGravity=false;b.body.immovable=true;b.checkWorldBounds=true;b.events.onOutOfBounds.add(this.removeGroup,this);b.anchor.setTo(0.5,0.5);b.rotateMe=(Math.random()*4)-2;this._alienGroup.add(b)},moveAliens:function(a){a.setAll("body.velocity.x",GameObject._scrollVelocity)},spawnRocket:function(){var a=game.add.sprite(0,0,"rocket");a.reset(game.width+a.width/2,game.height+10);a.anchor.setTo(0.5,1);this.physics.enable(a,Phaser.Physics.ARCADE);a.body.allowGravity=false;a.body.immovable=true;a.checkWorldBounds=true;a.events.onOutOfBounds.add(this.removeGroup,this);this._rocketGroup.add(a)},spawnPlanet:function(){var a=(Math.floor(Math.random()*(2))+1==1)?"planet":"moon";var b=game.add.sprite(825,200,a);b.anchor.setTo(0.5,1);this.physics.enable(b,Phaser.Physics.ARCADE);b.body.allowGravity=false;b.body.immovable=true;b.checkWorldBounds=true;b.events.onOutOfBounds.add(this.removeGroup,this);this._planetGroup.add(b)},moveLikeBakground:function(a){a.setAll("body.velocity.x",-200)},intersecStar:function(b,c){c.kill();GameObject._score+=c.points;GameObject._scoreText.setText(GameObject._score);var a=this.add.text(b.x+100,b.y,"+ "+c.points,{font:"35px Dosis",fill:"#FFFFFF"});this.add.tween(a).to({alpha:0,y:b.y-500},2000,"Linear",true,10,3);setTimeout(function(){game.world.remove(a)},2000);if(!GameObject.MUTE){GameObject._audioScore.play("",0)}},intersecMeteor:function(a,b){if(!b.hasOwnProperty("hasCollided")||!b.hasCollided){b.animations.add("explote",[1,2,3],10,false);b.animations.play("explote");
GameObject._health-=1;GameObject._healthText.setText(GameObject._health);if(!GameObject.MUTE){GameObject._audioBoing.volume=0.35;GameObject._audioBoing.play("",0)}b.hasCollided=true;this._player.alpha=0;this.add.tween(this._player).to({alpha:1},150,"Linear",true,10,3);this.healthTextOnIntersec("#FF0000","- 1")}},intersecMeteorGround:function(a,b){if(!b.hasOwnProperty("hasCollided")||!b.hasCollided){b.animations.add("explote",[1,2,3],10,false);b.animations.play("explote");if(!GameObject.MUTE){GameObject._audioImpact.play("",0)}b.hasCollided=true}},intersecGround:function(){GameObject._health-=1;GameObject._healthText.setText(GameObject._health);if(!GameObject.MUTE){GameObject._audioJump.play("",0)}this.healthTextOnIntersec("#FF0000","- 1")},intersecAlien:function(a,b){if(!b.hasOwnProperty("hasCollided")||!b.hasCollided){b.animations.add("explote",[1,2,3],10,false);b.animations.play("explote");b.angle=0;b.rotateMe=0;b.body.allowGravity=true;GameObject._health+=1;GameObject._healthText.setText(GameObject._health);this.healthTextOnIntersec("#aab300","+ 1");if(!GameObject.MUTE){GameObject._audioAlienRisa.play("",0);GameObject._audioAlienRisa.volume=0.25}b.hasCollided=true}},intersecRocket:function(b,a){if(!a.hasOwnProperty("hasCollided")||!a.hasCollided){GameObject._health-=1;GameObject._healthText.setText(GameObject._health);if(!GameObject.MUTE){GameObject._audioHit.play("",0)}this._player.alpha=0;this.add.tween(b).to({alpha:1},150,"Linear",true,10,3);this.add.tween(a).to({angle:15},150).start();a.hasCollided=true;this.healthTextOnIntersec("#FF0000","- 1")}},healthTextOnIntersec:function(b,e){var a=this._player.y-500;var d=game.add.sprite(this._player.x+100,this._player.y,"hearth");this.add.tween(d).to({alpha:0,y:a},2000,"Linear",true,10,3);var c=this.add.text(d.x+45,d.y-10,String(e),{font:"35px Dosis",fill:String(b)});this.add.tween(c).to({alpha:0,y:a},2000,"Linear",true,10,3);setTimeout(function(){game.world.remove(d);game.world.remove(c)},2000)},removeGroup:function(a){a.parent.children=[]},gameOver:function(){GameObject._totalSeconds=0;GameObject._seconds=0;GameObject._scrollVelocity=-200;this.state.start("GameOver")},manageSound:function(){if(GameObject.MUTE){GameObject._bgMusic.play();this._muteButton.setFrames(0);GameObject.MUTE=false}else{GameObject._bgMusic.pause();this._muteButton.setFrames(2);GameObject.MUTE=true}}};GameObject.GameOver=function(a){this._startButton=null;this._rankingButton=null;this._gameOverScore=null};GameObject.GameOver.prototype={preload:function(){this.load.image("background-gameover",GameObject.GAME_PATH+"assets/images/bg-gameover.jpg");this.load.image("btn-twitter",GameObject.GAME_PATH+"assets/images/btn-twitter-"+GameObject.LANG+".png");this.load.image("btn-facebook",GameObject.GAME_PATH+"assets/images/btn-facebook-"+GameObject.LANG+".png");this.load.spritesheet("button-play-morado",GameObject.GAME_PATH+"assets/images/btn-play-morado.png",270,85);this.load.spritesheet("button-ranking-morado",GameObject.GAME_PATH+"assets/images/btn-ranking-morado.png",270,85);this.load.spritesheet("button-menu-morado",GameObject.GAME_PATH+"assets/images/btn-menu-morado-"+GameObject.LANG+".png",270,84)},create:function(){GameObject._bgMusic.stop();if(!GameObject.MUTE){var a=this.add.audio("audio-gameover");a.play("",0)}this.add.sprite(0,0,"background-gameover");this._startButton=this.add.button(102,656,"button-play-morado",this.startGame,this,1,0);this._rankingButton=this.add.button(405,656,"button-ranking-morado",this.goRanking,this,1,0);this._menuButton=this.add.button(game.width/2,810,"button-menu-morado",this.backMainMenu,this,1,0);this._menuButton.anchor.set(0.5,0.5);this.shareTwitterButton=this.add.button(101,497,"btn-twitter",this.shareOnTwitter,this);this.shareFacebookButton=this.add.button(401,497,"btn-facebook",this.shareFacebook,this);this._gameOverScore=game.add.text(381,435,String(GameObject._score),{font:"60px Dosis",fill:"#a75ea3",align:"center"});this._gameOverScore.anchor.set(0.5,1);if(!GameObject.userLogged){this.sendScore()}},backMainMenu:function(){this.state.start("MainMenu")},shareOnTwitter:function(){if(GameObject.LANG=="es"){var a="http://twitter.com/share?text=Conseguí "+GameObject._score+" puntos en el Juego de "+GameObject.GAME_NAME+" ¿Te atreves a superarme?&url="+GameObject.GAME_SEO_URL+"&hashtags=pocoyo,juegos"}else{var a="http://twitter.com/share?text=I got "+GameObject._score+" points in "+GameObject.GAME_NAME+" game. Dare you to improve my score?&url="+GameObject.GAME_SEO_URL+"&hashtags=pocoyo,games"}window.open(a)},shareFacebook:function(){if(GameObject.LANG=="es"){var a="https://www.facebook.com/dialog/feed?app_id=140586622674265&link="+GameObject.GAME_SEO_URL+"&name=Conseguí "+GameObject._score+" puntos en el Juego de "+GameObject.GAME_NAME+" ¿Te atreves a superarme?&redirect_uri=http%3A%2F%2Fs7.addthis.com%2Fstatic%2Fpostshare%2Fc00.html&picture="+GameObject.GAME_IMG+"&description=Diviértete con el juego de los caramelos de Pocoyo. Cuantas más golosinas consigas coger, mejor puntuación obtendras."
}else{var a="https://www.facebook.com/dialog/feed?app_id=140586622674265&link="+GameObject.GAME_SEO_URL+"&name=I got "+GameObject._score+" points in "+GameObject.GAME_NAME+" game. Dare you to improve my score?&redirect_uri=http%3A%2F%2Fs7.addthis.com%2Fstatic%2Fpostshare%2Fc00.html&picture="+GameObject.GAME_IMG+"&description=Have fun with the sweets game of Pocoyo. Pick up many candies and you will have better score."}window.open(a)},startGame:function(){this.state.start("Game")},goRanking:function(){this.state.start("Ranking")},sendScore:function(){var a=this;var b=$("#pocoyo-game").attr("data-gameid");$.ajax({type:"POST",url:"/game/saveScore",data:{points:GameObject._score,gameId:b},context:document.body}).success(function(c){if(c==0){a.state.start("Register")}else{console.log("Se han guardado los puntos en el usuario XXX")}})}};GameObject.Ranking=function(a){this._ranking;this.rankingData="hola";this._textStyleScore=null;this._textStyleWho=null};GameObject.Ranking.prototype={preload:function(){this.load.image("background-ranking",GameObject.GAME_PATH+"assets/images/bg-ranking.jpg");this.load.spritesheet("btn-menu",GameObject.GAME_PATH+"assets/images/btn-menu-plano-verde-"+GameObject.LANG+".png",226,64)},create:function(){this.add.sprite(0,0,"background-ranking");var f=this.add.button(game.width/2,716,"btn-menu",this.backMainMenu,this,0,1);f.anchor.set(0.5,0.5);f.scale.setTo(0.75,0.75);this._ranking=this.getScore();this._textStyleScore={font:"48px Dosis",fill:"#727f0c",align:"right"};this._textStyleWho={font:"30px Dosis",fill:"#f3f7ab"};var a=this.add.text(650,258,this._ranking[0][0].score,this._textStyleScore);a.anchor.set(1,0);var j=this.add.text(280,265,this._ranking[0]["User"].username,this._textStyleWho);var d=this.add.text(650,343,this._ranking[1][0].score,this._textStyleScore);d.anchor.set(1,0);var g=this.add.text(280,352,this._ranking[1]["User"].username,this._textStyleWho);var h=this.add.text(650,425,this._ranking[2][0].score,this._textStyleScore);h.anchor.set(1,0);var e=this.add.text(280,432,this._ranking[2]["User"].username,this._textStyleWho);var k=this.add.text(650,510,this._ranking[3][0].score,this._textStyleScore);k.anchor.set(1,0);var b=this.add.text(280,518,this._ranking[3]["User"].username,this._textStyleWho);var c=this.add.text(650,593,this._ranking[4][0].score,this._textStyleScore);c.anchor.set(1,0);var i=this.add.text(280,601,this._ranking[4]["User"].username,this._textStyleWho)},backMainMenu:function(){this.state.start("MainMenu")},getScore:function(){myThis=this;var a=$("#pocoyo-game").attr("data-gameid");$.ajax({type:"POST",url:"/game/getScore",data:{gameId:a},context:document.body,async:false}).success(function(b){if(b==0){console.log("Error: no getRanking")}else{myThis.rankingData=b}});return JSON.parse(myThis.rankingData)}};GameObject.Instructions=function(a){};GameObject.Instructions.prototype={preload:function(){this.load.image("background-instructions",GameObject.GAME_PATH+"assets/images/bg-instructions-"+GameObject.LANG+".jpg");this.load.spritesheet("button-menu-instructions",GameObject.GAME_PATH+"assets/images/btn-menu-instructions-"+GameObject.LANG+".png",226,64)},create:function(){this.add.sprite(0,0,"background-instructions");var a=this.add.button(0,0,"button-menu-instructions",this.backMainMenu,this,0,1);a.reset(game.width/2-a.width/2,775)},backMainMenu:function(){this.state.start("MainMenu")}};GameObject.Register=function(a){};GameObject.Register.prototype={preload:function(){this.load.image("background-register",GameObject.GAME_PATH+"assets/images/bg-register-"+GameObject.LANG+".jpg");this.load.spritesheet("button-register",GameObject.GAME_PATH+"assets/images/btn-registrarse-"+GameObject.LANG+".png",222,70);this.load.spritesheet("button-login",GameObject.GAME_PATH+"assets/images/btn-login-"+GameObject.LANG+".png",222,70);this.load.spritesheet("button-menu",GameObject.GAME_PATH+"assets/images/btn-menu-rosa-"+GameObject.LANG+".png",222,70);this.load.spritesheet("button-close",GameObject.GAME_PATH+"assets/images/btn-close.png",56,56)},create:function(){this.add.sprite(0,0,"background-register");registerBt=this.add.button(0,0,"button-register",this.registration,this,1,0);registerBt.reset(game.width/2-(registerBt.width+10),385);loginBt=this.add.button(0,0,"button-login",this.login,this,1,0);loginBt.reset(game.width/2+10,385);btMenu=this.add.button(0,0,"button-menu",this.backMainMenu,this,1,0);btMenu.anchor.set(0.5,0.5);btMenu.reset(game.width/2,510);closeBt=this.add.button(600,185,"button-close",this.close,this,1,0)},backMainMenu:function(){this.state.start("MainMenu")},close:function(){GameObject.userLogged=true;this.state.start("GameOver")},registration:function(){var a=(GameObject.LANG=="es")?"http://www.pocoyo.com/club#registerForm":"http://www.pocoyo.com/en/club#registerForm";window.open(a)},login:function(){var a=(GameObject.LANG=="es")?"http://www.pocoyo.com/entrar":"http://www.pocoyo.com/en/login";window.open(a)},};var Player=function(b,a,d,c){Phaser.Sprite.call(this,b,a,d,"player",c);
this.anchor.setTo(-0.2,0.5);this.animations.add("flap",[0,1,2,3,4,5,6,7,8,9,10,11],12,true);this.animations.play("flap");this.alive=false;b.physics.arcade.enableBody(this);this.body.allowGravity=false};Player.prototype=Object.create(Phaser.Sprite.prototype);Player.prototype.constructor=Player;Player.prototype.flap=function(){if(this.body.y>50){this.body.velocity.y=-300}};var Ground=function(c,b,e,d,a){Phaser.TileSprite.call(this,c,b,e,d,a,"ground");this.autoScroll(GameObject._scrollVelocity,0);c.physics.arcade.enableBody(this);this.body.allowGravity=false;this.body.immovable=true};Ground.prototype=Object.create(Phaser.TileSprite.prototype);Ground.prototype.constructor=Ground;Ground.prototype.update=function(){};var Background=function(c,b,e,d,a){Phaser.TileSprite.call(this,c,b,e,d,a,"background");this.autoScroll(GameObject._scrollVelocity,0);this.game.physics.arcade.enableBody(this);this.body.allowGravity=false;this.body.immovable=true};Background.prototype=Object.create(Phaser.TileSprite.prototype);Background.prototype.constructor=Background;Background.prototype.update=function(){};game.state.add("Boot",GameObject.Boot);game.state.add("Preloader",GameObject.Preloader);game.state.add("MainMenu",GameObject.MainMenu);game.state.add("Game",GameObject.Game);game.state.add("GameOver",GameObject.GameOver);game.state.add("Ranking",GameObject.Ranking);game.state.add("Instructions",GameObject.Instructions);game.state.add("Register",GameObject.Register);game.state.start("Boot");